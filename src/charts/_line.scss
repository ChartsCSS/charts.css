@use "../utils/variables";

/*
 * Line Chart
 */
.charts-css {

  &.line {
    --#{ variables.$prefix }line-size: 3px;

    // Layout
    tbody {
      display: flex;
      justify-content: space-between;
      align-items: stretch;
      width: 100%;
      aspect-ratio: var(--#{ variables.$prefix }aspect-ratio, 21 / 9);

      tr {
        position: relative;

        display: flex;
        justify-content: flex-start;

        // Even row size
        flex-grow: 1;
        flex-shrink: 1;
        flex-basis: 0;
        overflow-wrap: anywhere;

        th {
          position: absolute;
          inset: 0;
          height: var(--#{ variables.$prefix }labels-size);
        }

        td {
          display: flex;
          flex-flow: column;
          position: absolute;
          width: 100%;
          height: 100%;
          inset: 0;
          z-index: 0;

          &::before {
            content: "";
            position: absolute;
            inset: 0;
            z-index: -1;
          }

          &::after {
            content: "";
            width: 100%;
          }
        }

      }
    }

    // Orientation - reverse
    &:not(.reverse) {
      tbody {
        tr {
          align-items: flex-end;

          th {
            justify-content: flex-end;
          }

          td {
            justify-content: center;

            .data {
              align-items: flex-start;
            }
          }
        }
      }
    }
    &.reverse {
      tbody {
        tr {
          align-items: flex-start;

          th {
            justify-content: flex-start;
          }

          td {
            justify-content: center;

            .data {
              align-items: flex-end;
            }
          }
        }
      }
    }

    // Orientation - reverse labels
    &:not(.reverse-labels) {
      &:not(.reverse) {
        tbody {
          tr {
            margin-block-end: var(--#{ variables.$prefix }labels-size);

            th {
              margin-block-start: auto;
              margin-block-end: calc(-1 * var(--#{ variables.$prefix }labels-size) - var(--#{ variables.$prefix }primary-axis-width));
            }
          }
        }
      }
      &.reverse {
        tbody {
          tr {
            margin-block-start: var(--#{ variables.$prefix }labels-size);

            th {
              margin-block-end: auto;
              margin-block-start: calc(-1 * var(--#{ variables.$prefix }labels-size) - var(--#{ variables.$prefix }primary-axis-width));
            }
          }
        }
      }
    }
    &.reverse-labels {
      &:not(.reverse) {
        tbody {
          tr {
            margin-block-start: var(--#{ variables.$prefix }labels-size);

            th {
              margin-block-end: auto;
              margin-block-start: calc(-1 * var(--#{ variables.$prefix }labels-size));
            }
          }
        }
      }
      &.reverse {
        tbody {
          tr {
            margin-block-end: var(--#{ variables.$prefix }labels-size);

            th {
              margin-block-start: auto;
              margin-block-end: calc(-1 * var(--#{ variables.$prefix }labels-size));
            }
          }
        }
      }
    }

    // Orientation - reverse data
    &:not(.reverse-data) {
      tbody {
        flex-direction: row;
      }
    }
    &.reverse-data {
      tbody {
        flex-direction: row-reverse;
      }
    }

    // Orientation - reverse datasets
    &:not(.reverse-datasets) {
      tbody {
        tr {
          flex-direction: row;
        }
      }
    }
    &.reverse-datasets {
      tbody {
        tr {
          flex-direction: row-reverse;
        }
      }
    }

    // Line
    &:not(.reverse) {
      &:not(.reverse-data) {
        tbody {
          tr {
            td {
              justify-content: flex-end;
              align-items: flex-end;

              &::before {
                clip-path:
                  polygon(
                    0% calc(100% * (1 - var(--#{ variables.$prefix }start, var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size))))),
                    100% calc(100% * (1 - var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size)))),
                    100% calc(100% * (1 - var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size))) - var(--#{ variables.$prefix }line-size)),
                    0% calc(100% * (1 - var(--#{ variables.$prefix }start, var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size)))) - var(--#{ variables.$prefix }line-size))
                  );
              }

              .data {
                &:dir(ltr) {
                  transform: translateX(50%);
                }
                &:dir(rtl) {
                  transform: translateX(-50%);
                }
              }

              &::after {
                height: calc(100% * var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size)));
              }
            }
          }
        }
      }
      &.reverse-data {
        tbody {
          tr {
            td {
              justify-content: flex-end;
              align-items: flex-start;

              &::before {
                clip-path:
                  polygon(
                    0% calc(100% * (1 - var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size)))),
                    100% calc(100% * (1 - var(--#{ variables.$prefix }start, var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size))))),
                    100% calc(100% * (1 - var(--#{ variables.$prefix }start, var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size)))) - var(--#{ variables.$prefix }line-size)),
                    0% calc(100% * (1 - var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size))) - var(--#{ variables.$prefix }line-size))
                  );
              }

              .data {
                &:dir(ltr) {
                  transform: translateX(-50%);
                }
                &:dir(rtl) {
                  transform: translateX(50%);
                }
              }

              &::after {
                height: calc(100% * var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size)));
              }
            }
          }
        }
      }
    }
    &.reverse {
      &:not(.reverse-data) {
        tbody {
          tr {
            td {
              justify-content: flex-end;
              align-items: flex-end;

              &::before {
                clip-path:
                  polygon(
                    0% calc(100% * var(--#{ variables.$prefix }start, var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size))) - var(--#{ variables.$prefix }line-size)),
                    100% calc(100% * var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size)) - var(--#{ variables.$prefix }line-size)),
                    100% calc(100% * var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size))),
                    0% calc(100% * var(--#{ variables.$prefix }start, var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size))))
                  );
              }

              .data {
                &:dir(ltr) {
                  transform: translateX(50%);
                }
                &:dir(rtl) {
                  transform: translateX(-50%);
                }
              }

              &::after {
                height: calc(100% * (1 - var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size))));
              }
            }
          }
        }
      }
      &.reverse-data {
        tbody {
          tr {
            td {
              justify-content: flex-end;
              align-items: flex-start;

              &::before {
                clip-path:
                  polygon(
                    0% calc(100% * var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size)) - var(--#{ variables.$prefix }line-size)),
                    100% calc(100% * var(--#{ variables.$prefix }start, var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size))) - var(--#{ variables.$prefix }line-size)),
                    100% calc(100% * var(--#{ variables.$prefix }start, var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size)))),
                    0% calc(100% * var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size)))
                  );
              }

              .data {
                &:dir(ltr) {
                  transform: translateX(-50%);
                }
                &:dir(rtl) {
                  transform: translateX(50%);
                }
              }

              &::after {
                height: calc(100% * (1 - var(--#{ variables.$prefix }end, var(--#{ variables.$prefix }size))));
              }
            }
          }
        }
      }
    }
  }
}
